@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}



<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">


<div class="container mt-5">
    <h2 class="text-center mb-4">Send an Email</h2>
    <form>
        <!-- Email Subject Field -->
        <div class="mb-3">
            <label for="email-subject" class="form-label">Email Subject</label>
            <input type="text" id="email-subject" class="form-control" placeholder="Enter Email Subject" required>
        </div>

        <!-- Sender Email Field -->
        <div class="mb-3">
            <label for="SenderEmailAddress" class="form-label">Receiver Email Address</label>
            <input type="email" id="ReceiverEmailAddress" class="form-control" placeholder="Enter receiver email address" required>
        </div>

        <!-- Message Field -->
        <div class="mb-3">
            <label for="email-message" class="form-label">Message</label>
            <textarea id="email-message" class="form-control" rows="5" placeholder="Enter your message" required></textarea>
        </div>

        <!-- Send Button -->
        <button type="submit" id="Send" class="btn btn-primary w-100">Send Email</button>
    </form>
</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
    $(document).ready(function () {
        $("#Send").on('click', function (e) {
            debugger
            e.preventDefault();

            var senderEmail = $("#ReceiverEmailAddress").val();
            var Subject= $("#email-subject").val();
            var Message = $("#email-message").val();


            var jsonResponse = JSON.stringify({
                htmlContent: `<h1>Welcome to My Email Service</h1>
                              <p>Thank you for messaging me! Here is your message:</p>
                              <p>${Message}</p>`
            });

            $.ajax({
                url: '@Url.Action("SendEmails", "SendEmail")',
                type: 'POST',
                data: {
                    senderEmailAddress: senderEmail,
                    jsonResponse: jsonResponse,
                    subject: Subject
                },
                success: function (response) {
                    alert(response.message);
                },
                error: function () {
                    alert("There was an error sending the email.");
                }
            });
        });
    });
</script>